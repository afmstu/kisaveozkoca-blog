const supabaseUrl="https://xdjyeicdaemdjqntdwsy.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhkanllaWNkYWVtZGpxbnRkd3N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3MzAyNDksImV4cCI6MjA2NzMwNjI0OX0.uoUGaNtWtfj_sYLKZdZuwFQX4I79BfYGYLxJ463Hb5Y";window.supabaseClient=supabase.createClient(supabaseUrl,supabaseKey);const authService={async signIn(e,t){const{data:a,error:s}=await window.supabaseClient.auth.signInWithPassword({email:e,password:t});if(s)throw console.error("Giriş hatası:",s),s;return a},async signOut(){const{error:e}=await window.supabaseClient.auth.signOut();if(e)throw console.error("Çıkış hatası:",e),e},async getCurrentUser(){const{data:{user:e}}=await window.supabaseClient.auth.getUser();return e},onAuthStateChange:e=>window.supabaseClient.auth.onAuthStateChange(e)},blogService={async getPosts(){const{data:e,error:t}=await window.supabaseClient.from("posts").select("*").order("created_at",{ascending:!1});return t?(console.error("Yazılar getirilirken hata:",t),[]):e||[]},async createPost(e){const{data:t,error:a}=await window.supabaseClient.from("posts").insert([{title:e.title,content:e.content,comments:e.comments||[]}]).select();if(a)throw console.error("Yazı eklenirken hata:",a),a;return t[0]},async addPost(e){return await this.createPost(e)},async updatePost(e,t){const{data:a,error:s}=await window.supabaseClient.from("posts").update(t).eq("id",e).select();if(s)throw console.error("Yazı güncellenirken hata:",s),s;return a[0]},async deletePost(e){const{error:t}=await window.supabaseClient.from("posts").delete().eq("id",e);if(t)throw console.error("Yazı silinirken hata:",t),t},async addComment(e,t){const a=(await this.getPost(e)).comments||[];return a.push({id:Date.now(),name:t.name,text:t.text,replies:[],timestamp:(new Date).toISOString(),date:(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),await this.updatePost(e,{comments:a})},async addReply(e,t,a){const s=(await this.getPost(e)).comments||[],r=s.findIndex(e=>e.id===t);return-1!==r&&(s[r].replies||(s[r].replies=[]),s[r].replies.push({id:Date.now(),name:a.name,text:a.text,timestamp:(new Date).toISOString(),date:(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})),await this.updatePost(e,{comments:s})},async deleteComment(e,t){const a=((await this.getPost(e)).comments||[]).filter(e=>e.id!==t);return await this.updatePost(e,{comments:a})},async deleteReply(e,t,a){const s=(await this.getPost(e)).comments||[],r=s.findIndex(e=>e.id===t);if(-1!==r){const e=s[r].replies.filter(e=>e.id!==a);s[r].replies=e}return await this.updatePost(e,{comments:s})},async getPost(e){const{data:t,error:a}=await window.supabaseClient.from("posts").select("*").eq("id",e).single();return a?(console.error("Yazı getirilirken hata:",a),null):t}},contactService={async getMessages(){const{data:e,error:t}=await window.supabaseClient.from("contact_messages").select("*").order("created_at",{ascending:!1});return t?(console.error("Mesajlar getirilirken hata:",t),[]):e||[]},async createMessage(e){const{data:t,error:a}=await window.supabaseClient.from("contact_messages").insert([{name:e.name,email:e.email,message:e.message}]).select();if(a)throw console.error("Mesaj eklenirken hata:",a),a;return t[0]}},playlistService={async getPlaylists(){const{data:e,error:t}=await window.supabaseClient.from("playlists").select("*").order("created_at",{ascending:!1});return t?(console.error("Playlistler getirilirken hata:",t),[]):e||[]},async createPlaylist(e){const{data:t,error:a}=await window.supabaseClient.from("playlists").insert([{title:e.title,description:e.description,spotify_url:e.spotifyUrl}]).select();if(a)throw console.error("Playlist eklenirken hata:",a),a;return t[0]},async updatePlaylist(e,t){const{data:a,error:s}=await window.supabaseClient.from("playlists").update(t).eq("id",e).select();if(s)throw console.error("Playlist güncellenirken hata:",s),s;return a[0]},async deletePlaylist(e){const{error:t}=await window.supabaseClient.from("playlists").delete().eq("id",e);if(t)throw console.error("Playlist silinirken hata:",t),t}};window.authService=authService,window.blogService=blogService,window.contactService=contactService,window.playlistService=playlistService;